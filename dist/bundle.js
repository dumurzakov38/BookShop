(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){l.classList.add("nav__containermenu--block"),a.classList.remove("dnone"),n.classList.add("dnone"),_.classList.add("dnone")}function o(){l.classList.remove("nav__containermenu--block"),a.classList.add("dnone"),n.classList.remove("dnone"),_.classList.remove("dnone")}e.d({},{ur:()=>y,m_:()=>I,hW:()=>v,Do:()=>C,J2:()=>S,Kz:()=>L,hJ:()=>h,oY:()=>N,RF:()=>E,Eu:()=>q,b0:()=>B});const n=document.querySelector(".nav__containermenu__btniconopen__button"),a=document.querySelector(".nav__containermenu__btniconclose__button"),l=document.querySelector(".nav__containermenu"),_=document.querySelector(".open");document.querySelector(".close");function s(){c.forEach((e=>{e.classList.remove("bannerActive")})),c[r].classList.add("bannerActive");const e=Array.from(i.children);e.forEach((e=>{e.classList.remove("banners__coorusel-span--active")})),e[r].classList.add("banners__coorusel-span--active")}const c=document.querySelectorAll(".banner"),i=document.querySelector(".banners__coorusel-spans");let r=0;function u(){!function(){for(let e=0;e<c.length;e++){const t=document.createElement("span");t.className="banners__coorusel-span",t.id=e,i.appendChild(t)}s()}(),i.addEventListener("click",(e=>{const t=e.target;t.classList.contains("banners__coorusel-span")&&(r=parseInt(t.id,10),s())})),setInterval((()=>{r=(r+1)%c.length,s(),r>=c.length&&(r=0)}),5e3)}function d(e){e=(e=e.replace(/\s/g,"")).replace(/&/g,"");document.querySelectorAll(".book__katalog__categories__container ul li span").forEach((e=>{e.classList.remove("book__katalog__categories__h1__span--active")}));document.querySelectorAll(".book__katalog__categories__container ul li h1").forEach((e=>{e.classList.remove("book__katalog__categories__h1--active")}));const t=document.querySelector(`.${e}`);t&&t.classList.add("book__katalog__categories__h1__span--active");const o=document.querySelector(`.h1__${e}`);o&&o.classList.add("book__katalog__categories__h1--active")}async function m(e,t){try{const o=await fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${e}&key=AIzaSyDuBIEPKqZHXRToe7UuEqFy4V2yPlgXbVA&printType=books&startIndex=${t}&maxResults=6&langRestrict=en`);if(!o.ok)return void console.log("Статус ответа:",o.status);!function(e){const t=e.items.length;for(let o=0;o<t;o++){const t=e.items[o];let n;t.id.length>=2&&t.id[0]===t.id[1]?(n=t.id.substring(1),n=n.replace(/[\s?/.,-/_]/g,"").toUpperCase(),t.id=n):n=t.id.replace(/[\s?/.,-/_]/g,"").toUpperCase();const a=document.createElement("div");a.className="book__katalog__result__aboutBook",a.id=n;const l=document.createElement("div");l.className="book__katalog__result__aboutBook__img";const _=document.createElement("img");null!=t.volumeInfo.imageLinks&&t.volumeInfo&&t.volumeInfo.imageLinks&&t.volumeInfo.imageLinks.smallThumbnail?_.src=t.volumeInfo.imageLinks.smallThumbnail:_.src="../images/plaseholder.jpg",_.alt=`Обложка Книги - ${t.volumeInfo.title}`,l.appendChild(_);const s=document.createElement("div");s.className="book__katalog__result__aboutBook__info";const c=document.createElement("p");if(c.className="book__katalog__result__aboutBook__info__Author",null!=t.volumeInfo.authors){const e=t.volumeInfo.authors;if(e.length>2){const o=t.volumeInfo.authors[0]+","+t.volumeInfo.authors[1]+"...";c.textContent=o,c.title=e}else c.textContent=e,c.title=e}s.appendChild(c);const i=document.createElement("h1");if(i.className="book__katalog__result__aboutBook__info__Name",null!=t.volumeInfo.title)if(t.volumeInfo.title.length<25)i.textContent=t.volumeInfo.title;else{const e=t.volumeInfo.title,o=e.slice(0,25)+"...";i.textContent=o,i.title=e}s.appendChild(i);const r=document.createElement("div");r.className="book__katalog__result__aboutBook__info__Rating";const u=document.createElement("div"),d=document.createElement("p");if(u.className="rating",void 0===t.volumeInfo.averageRating);else{const e=[],o=5,n=20*t.volumeInfo.averageRating;for(let t=1;t<=o;t++){const t=document.createElement("span");t.className="star",t.innerHTML="&#9733;",e.push(t),u.appendChild(t)}const a=n=>{const a=n/100*o;for(let t=0;t<o;t++)t<a?e[t].classList.add("active"):e[t].classList.remove("active");if(t.volumeInfo.ratingsCount>1e3){let e=t.volumeInfo.ratingsCount;e=(e/1e3).toString().slice(0,3)+"M review";const o=document.createElement("p");o.className="book__katalog__result__aboutBook__info__Rating__p",o.textContent=e,d.appendChild(o)}else{const e=document.createElement("p");e.className="book__katalog__result__aboutBook__info__Rating__p",e.textContent=t.volumeInfo.ratingsCount+"review",d.appendChild(e)}};a(n)}r.appendChild(u),r.appendChild(d),s.appendChild(r);const m=document.createElement("p");if(m.className="book__katalog__result__aboutBook__info__Description",null!=t.volumeInfo.description)if(t.volumeInfo.description.length<75)m.textContent=t.volumeInfo.description;else{const e=t.volumeInfo.description,o=e.slice(0,76)+"...";m.textContent=o,m.title=e}s.appendChild(m);const k=document.createElement("h1");t.saleInfo&&t.saleInfo.retailPrice&&(k.textContent=t.saleInfo.retailPrice?t.saleInfo.retailPrice.amount:"","KZT"===t.saleInfo.retailPrice.currencyCode?k.className="book__katalog__result__aboutBook__info__Price book__katalog__result__aboutBook__info__Price__kzt":"USD"===t.saleInfo.retailPrice.currencyCode?k.className="book__katalog__result__aboutBook__info__Price book__katalog__result__aboutBook__info__Price__usd":"RUB"===t.saleInfo.retailPrice.currencyCode&&(k.className="book__katalog__result__aboutBook__info__Price book__katalog__result__aboutBook__info__Price__rub"));const b=document.createElement("button");b.className=`book__katalog__result__btn book__katalog__result__btn__btnadddellbasket id${n}`,b.dataset.info=n,b.title="Добавить в Корзину",b.textContent="buy now",s.appendChild(b),s.appendChild(r),s.appendChild(m),s.appendChild(k),s.appendChild(b),a.appendChild(l),a.appendChild(s),C.appendChild(a)}}(await o.json())}catch(e){console.error("Ошибка:",e)}}function k(e,t){t?(e.textContent="IN THE CART",e.title="В корзине",e.classList.add("book__katalog__result__btn__btnadddellbasket-deactiv")):(e.textContent="buy now",e.title="Добавить в корзину",e.classList.remove("book__katalog__result__btn__btnadddellbasket-deactiv"))}function b(){const e=document.querySelectorAll(".book__katalog__result__aboutBook"),t=[];for(let o=0;o<e.length;o++){const n={id:e[o].attributes?.id.value};t.push(n)}!function(e){for(let t=0;t<e.length;t++){let o=e[t].id;k(document.querySelector(`.id${o}`),!0)}}(B.filter((e=>t.some((t=>t.id===e.id)))))}async function f(){E(L+6),await m(S,L),b()}function g(){B.length>0?(y.innerHTML=B.length,y.classList.remove("nav__functional-basket__none"),1===B.length?I.title=`в Корзине ${B.length} товар`:B.length>1&&B.length<5?I.title=`в Корзине ${B.length} товара`:I.title=`в Корзине ${B.length} товаров`):0===B.length&&(y.classList.add("nav__functional-basket__none"),I.title="")}function p(){document.querySelector(".book__katalog__result__books").addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("book__katalog__result__btn__btnadddellbasket")){const e=t.getAttribute("data-info");B.some((t=>t.id===e))?(N(B.filter((t=>t.id!==e))),k(t,!1)):(B.push({id:e}),k(t,!0)),localStorage.setItem("Basket",JSON.stringify(B)),g(),b()}})),b()}console.log(r);const v=document.querySelectorAll(".book__katalog__categories__container ul li h1"),h=document.querySelector(".book__katalog__result__moreBtn"),C=document.querySelector(".book__katalog__result__books"),y=document.querySelector(".nav__functional-basket"),I=document.querySelector(".basket");let L=0;function E(e){L=e}let S="Architecture";function q(e){S=e}let B=JSON.parse(localStorage.getItem("Basket"))||[];function N(e){B=e}!async function(){n.addEventListener("click",t),a.addEventListener("click",o),u(),v.forEach((e=>{e.addEventListener("click",(t=>{for(E(0);C.firstChild;)C.removeChild(C.firstChild);q(e.getAttribute("data-info")),d(S),m(S,L)}))})),h.addEventListener("click",f),await m(S,L),d(S),g(),p()}()})();